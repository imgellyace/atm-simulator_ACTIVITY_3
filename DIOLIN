using System;

public class ATMSimulator
{
    public static void Main()
    {
        Console.WriteLine("ATM Simulator");
        Console.WriteLine("Created by Angel Mey Diolin\n");
        
        double balance = 1000.00;
        bool exit = false;

        while (!exit)
        {
            try 
            {
                Console.WriteLine("1. Check Balance");
                Console.WriteLine("2. Deposit Money");
                Console.WriteLine("3. Withdraw Money");
                Console.WriteLine("4. Exit");
                Console.Write("Select an option (1-4): ");
                
                switch (Console.ReadLine())
                {
                    case "1":
                        Console.WriteLine($"\nCurrent Balance: ${balance:F2}\n");
                        break;
                        
                    case "2":
                        Console.Write("Enter deposit amount: ");
                        if (double.TryParse(Console.ReadLine(), out double deposit) && deposit > 0)
                        {
                            balance += deposit;
                            Console.WriteLine($"Deposit successful. New balance: ${balance:F2}\n");
                        }
                        else
                        {
                            Console.WriteLine("Invalid amount. Please enter a positive number.\n");
                        }
                        break;
                        
                    case "3":
                        Console.Write("Enter withdrawal amount: ");
                        if (double.TryParse(Console.ReadLine(), out double withdraw) && withdraw > 0)
                        {
                            if (withdraw <= balance)
                            {
                                balance -= withdraw;
                                Console.WriteLine($"Withdrawal successful. New balance: ${balance:F2}\n");
                            }
                            else
                            {
                                Console.WriteLine("Insufficient funds.\n");
                            }
                        }
                        else
                        {
                            Console.WriteLine("Invalid amount. Please enter a positive number.\n");
                        }
                        break;
                        
                    case "4":
                        exit = true;
                        Console.WriteLine("Thank you for using our ATM!");
                        break;
                        
                    default:
                        Console.WriteLine("Invalid option. Please select 1-4.\n");
                        break;
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"An error occurred: {ex.Message}\n");
            }
        }
    }
}
